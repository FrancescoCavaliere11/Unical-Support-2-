<div class="modal-overlay" >
  <div class="modal" (click)="$event.stopPropagation()">
    <header>
      <div class="header-content">
        <hugeicons-icon [icon]="Upload01Icon" ></hugeicons-icon>
        <h4>Carica Documento</h4>
      </div>
      <hugeicons-icon (click)="closePopup()" [icon]="Cancel01Icon" class="cancel-icon"></hugeicons-icon>
    </header>
    <div class="separator"></div>
    <section>
      <form [formGroup]="form">
        <div class="category selection">
          <div class="category-label">
            <h5>Categoria</h5>
            <p class="red">*</p>
          </div>
          <select formControlName="categoryId">
            <option value="" disabled selected>Seleziona una categoria</option>
            @for (category of categories; track category.id) {
              <option [value]="category.id">{{ category.name }}</option>
            }
          </select>
        </div>

        <div class="file-uploader" [class.drag]="dragOver" (dragover)="onDragOver($event)"  (dragleave)="onDragLeave($event)" (drop)="onDrop($event)">
          <h3>Trascina qui i file</h3>
          <p>oppure</p>
          <input
            id="fileUpload"
            type="file"
            hidden
            accept=".pdf, .doc, .docx, .txt"
            (change)="onFileSelected($event)"/>
          <label for="fileUpload" class="file-upload-button">Scegli un file</label>
          <p>PDF, Word, Excel, TXT</p>
        </div>
        @if (file) {
          <div class="selected-files">
            <h5>File selezionato</h5>
            <div class="file-item">
              <div class="file">
                <hugeicons-icon [icon]="DocumentAttachmentIcon"></hugeicons-icon>
                <div class="file-info">
                  <p>{{ file.name }}</p>
                  <p>{{ formatFileSize(file.size)}}</p>
                </div>
              </div>
              <hugeicons-icon (click)="removeFile()" [icon]="Cancel01Icon" class="cancel-icon" ></hugeicons-icon>
            </div>
          </div>
        }
        <p class="ia-warning">I documenti verranno utilizzati dall'AI per fornire risposte pi√π accurate alle email degli studenti.</p>
      </form>
    </section>
    <div class="separator"></div>
    <footer>
      <button class="cancel-btn" (click)="closePopup()">Annulla</button>
      <button [disabled]="isUploadDisabled" (click)="upload()">Carica Documenti</button>
    </footer>
  </div>
</div>


